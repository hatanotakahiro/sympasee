<%= render "shared/header" %>
<div class="index-review">
  <div class="user-show-content container-fluid">
    <div class="row">
      <div class="col-4">
        <%= @user.nickname %><br>
        <%= image_tag @user.profile_image.variant(resize: '100x100'), class: "user-image" if @user.profile_image.attached? %>
        <%= image_tag "user_nil.png" , size: "100x100" unless @user.profile_image.attached?  %>
      </div>
      <div class="col-8">
        <%= @user.avg_user_story %>
        <%= @user.avg_user_impact %>
        <%= @user.avg_user_impressed %>
        <%= @user.avg_user_happy %>
        <%= @user.avg_user_character %>
        <%= @user.avg_user_beautiful %>

      </div>
    </div>
  </div>
  <% @reviews.each do |review| %>
    <div class="index-review-content-each container-fluid">
        <table class="table is-fullwidth has-text-centered">
          <thead align="center">
            <tr>
              <th class="review-index-user">評価した作品</th>
              <th class="review-index-score">点数</th>
              <th class="review-index-text">内容</th>
              <th class="review-index-status">それぞれの評価</th>
            </tr>
          </thead>
          <tbody align="center">
            <tr>
              <td>
                <%= link_to movie_path(review.movie.id) do %>
                  <%= review.movie.movie_title %><br>
                  <%= image_tag review.movie.movie_image.variant(resize: '300x300'), class: "user-image" if review.user.profile_image.attached? %>
                  <%= image_tag "../images/no_image.jpeg" , size: "100x100" unless review.movie.movie_image.attached?  %>
                <% end %>
              </td>
              <td><%= review.review_status.review_score %></td>
              <td align="left"><%= review.review_text %></td>
              <td>
                <div class="review-index-content">
                  <table>
                    <tr class="review-index-content-tr">
                      <th class="review-index-content-th"><h6>ストーリー：</h6></th>
                      <td class="review-index-content-td1">
                        <div class="star-rating-content-index">
                          <div class="star-rating-index-front" style="width: <%= review.review_status.review_story * 10 %>%">★★★★★★★★★★</div>
                          <div class="star-rating-index-back">★★★★★★★★★★</div>
                        </div>
                      </td>
                      <td class="review-index-td2">
                        <h6><%= review.review_status.review_story %>点</h6>
                      </td>
                    </tr>
                    <tr class="review-index-content-tr">
                      <th class="review-index-content-th"><h6>衝撃：</h6></th>
                      <td class="review-index-content-td1">
                        <div class="star-rating-content-index">
                          <div class="star-rating-index-front" style="width: <%= review.review_status.review_impact * 10 %>%">★★★★★★★★★★</div>
                          <div class="star-rating-index-back">★★★★★★★★★★</div>
                        </div>
                      </td>
                      <td class="review-index-td2">
                        <h6><%= review.review_status.review_impact %>点</h6>
                      </td>
                    </tr>
                    <tr class="review-index-content-tr">
                      <th class="review-index-content-th"><h6>感動：</h6></th>
                      <td class="review-index-content-td1">
                        <div class="star-rating-content-index">
                          <div class="star-rating-index-front" style="width: <%= review.review_status.review_impressed * 10 %>%">★★★★★★★★★★</div>
                          <div class="star-rating-index-back">★★★★★★★★★★</div>
                        </div>
                      </td>
                      <td class="review-index-td2">
                        <h6><%= review.review_status.review_impressed %>点</h6>
                      </td>
                    </tr>
                    <tr class="review-index-content-tr">
                      <th class="review-index-content-th"><h6>楽しさ：</h6></th>
                      <td class="review-index-content-td1">
                        <div class="star-rating-content-index">
                          <div class="star-rating-index-front" style="width: <%= review.review_status.review_happy * 10 %>%">★★★★★★★★★★</div>
                          <div class="star-rating-index-back">★★★★★★★★★★</div>
                        </div>
                      </td>
                      <td class="review-index-td2">
                        <h6><%= review.review_status.review_happy %>点</h6>
                      </td>
                    </tr>
                    <tr class="review-index-content-tr">
                      <th class="review-index-content-th"><h6>登場人物：</h6></th>
                      <td class="review-index-content-td1">
                        <div class="star-rating-content-index">
                          <div class="star-rating-index-front" style="width: <%= review.review_status.review_character * 10 %>%">★★★★★★★★★★</div>
                          <div class="star-rating-index-back">★★★★★★★★★★</div>
                        </div>
                      </td>
                      <td class="review-index-td2">
                        <h6><%= review.review_status.review_character %>点</h6>
                      </td>
                    </tr>
                    <tr class="review-index-content-tr">
                      <th class="review-index-content-th"><h6>映像美：</h6></th>
                      <td class="review-index-content-td1">
                        <div class="star-rating-content-index">
                          <div class="star-rating-index-front" style="width: <%= review.review_status.review_beautiful * 10 %>%">★★★★★★★★★★</div>
                          <div class="star-rating-index-back">★★★★★★★★★★</div>
                        </div>
                      </td>
                      <td class="review-index-td2">
                        <h6><%= review.review_status.review_beautiful %>点</h6>
                      </td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
    </div>
  <% end %>
  <%= paginate @reviews %>
</div>
<%= render "shared/footer" %>